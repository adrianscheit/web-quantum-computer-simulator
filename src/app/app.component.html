<div [hidden]="cookies">
    This page does not uses any cookies now. To save your program in your browser for your further visits, you have to
    accept cookies:
    <button (click)="cookies=true">Agree</button>
</div>
<div [hidden]="!cookies">
    You agreed in the past, that this page is using cookies! If you want to revoke it:
    <button (click)="cookies=false">Revoke cookies</button>
</div>
<section>
    <h1>Quantum Computer Simulator in your browser!</h1>
    <ul>
        <li>Quantum computer simultor implementation, free for use for everyone.</li>
        <li>Initally all qubits are |0></li>
        <li>The computer scale-up automatically as you add new operations</li>
        <li>For simulation time issue, try to keep the quantity of qubits low
            (more then 10 qubits requires some noticable amount of time to simulate, every qubit more makes the
            simulation about twice that slow)</li>
        <li>Your program is not send to the server - it is runing in your web-browser</li>
        <li>Clear UI - great UX</li>
        <li>This application is mobile friendly (regarding the UI, because regarding the CPU usage during the sumulation
            it is far away to be mobile-friendly)</li>
    </ul>
</section>

<section>
    <h2>Program in list of quantum operations:</h2>
    <app-default-gate [defaultGateName]="defaultGateName" (change)="defaultGateName=$event.target.value">
    </app-default-gate>
    <table>
        <tbody>
            <tr>
                <th>Operation#</th>
                <th>Gate type</th>
                <th>Connected Qubits</th>
            </tr>
            <tr *ngFor="let operation of program; let i=index" [class.invalid]="errorMap.has(i)">
                <td>#{{i}}</td>
                <td>{{operation.gn}}</td>
                <td>{{getOperationQubitIndexes(operation.qi)}}</td>
                <td>
                    <button (click)="addOperation(i,undefined)">Add before</button>
                    <button (click)="editOperation(i)">Edit</button>
                    <button (click)="deleteOperation(i)">Delete</button>
                </td>
                <td>{{errorMap.get(i)}}</td>
            </tr>
            <tr>
                <td colspan="3">
                    <button (click)="addOperation(program.length,undefined)">Add new operation</button>
                </td>
            </tr>
        </tbody>
    </table>
</section>

<section *ngIf="errorMap.size===0">
    <h2>Program in 2D gates table representation</h2>
    <app-default-gate [defaultGateName]="defaultGateName" (change)="defaultGateName=$event.target.value">
    </app-default-gate>
    <table>
        <tbody>
            <tr>
                <th>Step#</th>
                <th *ngFor="let i of getIndexes(qubitsQuantity)">
                    <div class="column">
                        <button type="button" (click)="addQubitBefore(i)">Add qubit before</button>
                        QuBit#{{i}}
                        <button (click)="deleteQubit(i)">Delete</button>
                    </div>
                </th>
                <th>New qubit</th>
            </tr>
            <tr *ngFor="let step of programGUI; let i=index ">
                <td>#{{i}}</td>
                <td *ngFor="let guiGate of step; let j=index" [colspan]=1>
                    <app-gate [gate]="guiGate" (click)="changeOperation(guiGate,i,j)"></app-gate>
                </td>
                <td>
                    <button (click)="addStep(i)">Add step before</button>
                    <button (click)="deleteStep(i) ">Delete step</button>
                </td>
            </tr>
        </tbody>
    </table>
    <button (click)="complem()">Complementary the program</button>
    <button (click)="simulate()">Simulate</button>
</section>

<section>
    <h2>Program represents the operations in JSON</h2>
    <textarea (change)="setProgramJson($event.target.value)" [value]="programJson"
        [class.invalid]="jsonError"></textarea>
    <button (click)="simulate()">Simulate</button>
    <p>You can copy&paste the JSON code to save&restore your programs. You can also try examples:</p>
    <ul>
        <li>
            <pre>[]</pre>
        </li>
    </ul>
</section>

<section>
    <h2>Results</h2>
    <div class="flex">
        <section *ngFor="let result of results">
            <h3>Sumulation #{{result.id+1}}</h3>
            <ul>
                <li>Simulation started: {{result.startTime.toLocaleTimeString()}}</li>
                <li>Number of qubits: {{result.qubitsQuantity}}</li>
                <li>Number of operations: {{result.operationsQuantity}}</li>
                <li>Progress: {{result.progress*100 | number:'.1-2'}}%</li>
                <li *ngIf="result.results">End time: {{result.endTime.toLocaleTimeString()}}; simulation time:
                    {{result.endTime.getTime()-result.startTime.getTime()}}ms</li>
            </ul>
            <div *ngIf="result.results">
                Results:
                <table>
                    <tbody>
                        <tr>
                            <th>Propabilities</th>
                            <th *ngFor="let i of getIndexes(result.qubitsQuantity)">Q#{{i}}</th>
                        </tr>
                        <tr *ngFor="let r of result.results">
                            <td>{{r.propability * 100 | number:'.0-1'}}%</td>
                            <td *ngFor="let qv of r.values">{{qv?1:0}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</section>

<section>
    <h2>All avaliable gates:</h2>
    <div class="flex">
        <app-gate-view *ngFor="let gate of gates" [gate]="gate"></app-gate-view>
    </div>
</section>

<section>
    <h2>Legal</h2>
    <section>
        <h3>Cookies policy</h3>
        <p>
            This site uses cookies only when the user accept it.
            This site uses cookies only to save the user program for the further usages.
            There is one property in local storage used in case the user consent to cookies: program
            - that contains the JSON representation of the user program.
        </p>
    </section>
    <section>
        <h3>Private policy</h3>
        <p>
            This site does not save any user datas. The optional cookies are not used to identify the user.
            All calcualtion and data are performed and process in the user web-browser, thats rund this site.
        </p>
    </section>
    <section>
        <h3>Conditions & licence</h3>
        <p>
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND.
            The software is free to use, but not free to copy or modify.
            Modifications to the software are not allowed.
            <a href="/3rdpartylicenses.txt">The software uses 3rd party dependencies. To see its licences click
                here.</a>
        </p>
    </section>
</section>

<!-- <section>
    <h2>Feedback</h2>
    <textarea></textarea>
    <button>Submit!</button>
</section> -->

<app-operation [program]="program" [index]="currentOperationIndex" (exit)="exitOperation()"></app-operation>
